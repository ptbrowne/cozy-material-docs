



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Cozy documentation">
      
      
        <link rel="canonical" href="https://docs.cozy.io/cozy-client-js/data-api/">
      
      
        <meta name="author" content="CozyCloud - https://cozy.io">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[^a-zа-яё0-9\-]">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Data System API - Cozy Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    <script type="text/javascript">
        // Used in extra.js, we have to define the variable here since
        // we need access to the "config" jinja variable
        window.outsideDocs = [{"repo": "https://github.com/cozy/cozy-app-publish.git", "name": "cozy-app-publish", "subdir": "."}, {"repo": "https://github.com/cozy/cozy-apps-registry.git", "name": "cozy-apps-registry", "subdir": "."}, {"repo": "https://github.com/cozy/cozy-client.git", "name": "cozy-client", "subdir": "docs"}, {"repo": "https://github.com/cozy/cozy-client-js.git", "name": "cozy-client-js", "subdir": "docs"}, {"repo": "https://github.com/cozy/cozy-ui.git", "name": "cozy-ui", "subdir": "docs"}, {"repo": "https://github.com/cozy/cozy-doctypes.git", "name": "cozy-doctypes", "subdir": "."}, {"repo": "https://github.com/konnectors/libs.git", "name": "cozy-konnector-libs", "subdir": "packages/cozy-konnector-libs/docs"}, {"repo": "https://github.com/CPatchane/create-cozy-app.git", "name": "cozy-scripts", "subdir": "packages/cozy-scripts/docs"}, {"repo": "https://github.com/cozy/cozy-stack.git", "name": "cozy-stack", "subdir": "docs"}, {"repo": "https://github.com/konnectors/konitor.git", "name": "konitor", "subdir": "docs"}, {"repo": "https://github.com/cozy/cozy-libs.git", "name": "babel-preset-cozy-app", "subdir": "packages/babel-preset-cozy-app"}, {"repo": "https://github.com/cozy/cozy-libs.git", "name": "commitlint-config-cozy", "subdir": "packages/commitlint-config-cozy"}, {"repo": "https://github.com/cozy/cozy-libs.git", "name": "cozy-device-helper", "subdir": "packages/cozy-device-helper"}, {"repo": "https://github.com/cozy/cozy-libs.git", "name": "eslint-config-cozy-app", "subdir": "packages/eslint-config-cozy-app"}, {"repo": "https://github.com/cozy/cozy-libs.git", "name": "cozy-flags", "subdir": "packages/cozy-flags"}, {"repo": "https://github.com/cozy/cozy-libs.git", "name": "cozy-realtime", "subdir": "packages/cozy-realtime"}]
    </script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700|Ubuntu+Mono&display=fallback">
        <style>body,input{font-family:"Lato","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#data-api" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Cozy Developer Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Data System API
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cozy/cozy.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.cozy.io/" title="Cozy Developer Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    Cozy Developer Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cozy/cozy.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/app/" title="Create Your Application" class="md-nav__link">
      Create Your Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/konnector/" title="Develop a Connector" class="md-nav__link">
      Develop a Connector
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/selfhost-debian/" title="Self-Host on Debian" class="md-nav__link">
      Self-Host on Debian
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      How-to
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        How-to
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Dev
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Dev
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/runCozyDocker/" title="Run an App in a Cozy using Docker" class="md-nav__link">
      Run an App in a Cozy using Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/hmr/" title="Use Hot Module Replacement in Your App" class="md-nav__link">
      Use Hot Module Replacement in Your App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/cordova/" title="Make a Mobile App Using Cordova" class="md-nav__link">
      Make a Mobile App Using Cordova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/connect-mobile-app-local-stack/" title="Connect a Mobile App to Your Local Stack" class="md-nav__link">
      Connect a Mobile App to Your Local Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/dev/sendmail/" title="Send and Receive E-mails in Development" class="md-nav__link">
      Send and Receive E-mails in Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../references/git-flow/" title="Our Front-End Git Flow" class="md-nav__link">
      Our Front-End Git Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../references/tech-intro/" title="Technical introduction to the Cozy platform" class="md-nav__link">
      Technical introduction to the Cozy platform
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Synchronize
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Synchronize
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../howTos/sync/linux/" title="Install Cozy Drive on GNU/Linux" class="md-nav__link">
      Install Cozy Drive on GNU/Linux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Stack and tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Stack and tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../eslint-config-cozy-app/" title="eslint-config-cozy-app" class="md-nav__link">
      eslint-config-cozy-app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commitlint-config-cozy/" title="commitlint-config-cozy" class="md-nav__link">
      commitlint-config-cozy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      cozy-stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        cozy-stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-2" type="checkbox" id="nav-4-3-2">
    
    <label class="md-nav__link" for="nav-4-3-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/INSTALL/" title="Install the cozy-stack" class="md-nav__link">
      Install the cozy-stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/config/" title="Configuration file" class="md-nav__link">
      Configuration file
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/instance/" title="Managing Instances" class="md-nav__link">
      Managing Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/cli/cozy-stack/" title="Manpages of the command-line tool" class="md-nav__link">
      Manpages of the command-line tool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-3" type="checkbox" id="nav-4-3-3">
    
    <label class="md-nav__link" for="nav-4-3-3">
      How-to guides for developpers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-3">
        How-to guides for developpers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/client-app-dev/" title="Develop a client-side app" class="md-nav__link">
      Develop a client-side app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/docker/" title="Running and building Docker images" class="md-nav__link">
      Running and building Docker images
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/doctype/" title="Adding a new doctype" class="md-nav__link">
      Adding a new doctype
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/assets/" title="Working with the stack assets" class="md-nav__link">
      Working with the stack assets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/release/" title="Build a release" class="md-nav__link">
      Build a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/CONTRIBUTING/" title="The contributing guide" class="md-nav__link">
      The contributing guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-4" type="checkbox" id="nav-4-3-4">
    
    <label class="md-nav__link" for="nav-4-3-4">
      Explanations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-4">
        Explanations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/sharing-design/" title="Sharing design" class="md-nav__link">
      Sharing design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/konnectors-workflow/" title="Workflow of the konnectors" class="md-nav__link">
      Workflow of the konnectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3-5" type="checkbox" id="nav-4-3-5">
    
    <label class="md-nav__link" for="nav-4-3-5">
      List of services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-3-5">
        List of services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/auth/" title="/auth - Authentication & OAuth" class="md-nav__link">
      /auth - Authentication & OAuth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/apps/" title="/apps - Applications Management" class="md-nav__link">
      /apps - Applications Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/registry/" title="/apps - Apps registry" class="md-nav__link">
       /apps - Apps registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/konnectors/" title="/apps - Konnectors" class="md-nav__link">
       /apps - Konnectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/data-system/" title="/data - Data System" class="md-nav__link">
      /data - Data System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/mango/" title="/data - Mango" class="md-nav__link">
       /data - Mango
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/couchdb-quirks/" title="/data - CouchDB Quirks" class="md-nav__link">
       /data - CouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/pouchdb-quirks/" title="/data - PouchDB Quirks" class="md-nav__link">
       /data - PouchDB Quirks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/files/" title="/files - Virtual File System" class="md-nav__link">
      /files - Virtual File System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/references-docs-in-vfs/" title="/files - References of documents in VFS" class="md-nav__link">
       /files - References of documents in VFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/intents/" title="/intents - Intents" class="md-nav__link">
      /intents - Intents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/jobs/" title="/jobs - Jobs" class="md-nav__link">
      /jobs - Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/workers/" title="/jobs - Workers" class="md-nav__link">
       /jobs - Workers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/move/" title="/move - Move, export and import an instance" class="md-nav__link">
      /move - Move, export and import an instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/notifications/" title="/notifications - Notifications" class="md-nav__link">
      /notifications - Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/public/" title="/public - Public" class="md-nav__link">
      /public - Public
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/permissions/" title="/permissions - Permissions" class="md-nav__link">
      /permissions - Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/realtime/" title="/realtime - Realtime" class="md-nav__link">
      /realtime - Realtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/remote/" title="/remote - Proxy for remote data/API" class="md-nav__link">
      /remote - Proxy for remote data/API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/settings/" title="/settings - Settings" class="md-nav__link">
      /settings - Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/user-action-required/" title="/settings - Terms of Services" class="md-nav__link">
       /settings - Terms of Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-stack/sharing/" title="/sharings - Sharing" class="md-nav__link">
      /sharings - Sharing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-app-publish/" title="cozy-app-publish" class="md-nav__link">
      cozy-app-publish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../babel-preset-cozy-app/" title="babel-preset-cozy-app" class="md-nav__link">
      babel-preset-cozy-app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../konitor/cli/" title="konitor" class="md-nav__link">
      konitor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      cozy-doctypes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        cozy-doctypes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.accounts/" title="Accounts" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.bank/" title="Banking doctypes" class="md-nav__link">
      Banking doctypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.bills/" title="Bills" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.konnectors/" title="Connectors" class="md-nav__link">
      Connectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.contacts/" title="Contacts" class="md-nav__link">
      Contacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.files/" title="Files" class="md-nav__link">
      Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.files_metadata/" title="Files metadata" class="md-nav__link">
      Files metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.identities/" title="Identities" class="md-nav__link">
      Identities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Session logins" class="md-nav__link">
      Session logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.photos.albums/" title="Photos Albums" class="md-nav__link">
      Photos Albums
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.procedures/" title="Procedures" class="md-nav__link">
      Procedures
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sessions.logins/" title="Sessions Logins" class="md-nav__link">
      Sessions Logins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sharings/" title="Sharings" class="md-nav__link">
      Sharings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.account_types/" title="Accounts Types" class="md-nav__link">
      Accounts Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/cc.cozycloud.autocategorization/" title="Autocategorization" class="md-nav__link">
      Autocategorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.exports/" title="Exports" class="md-nav__link">
      Exports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.jobs/" title="Jobs" class="md-nav__link">
      Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.oauth.clients/" title="OAuth Clients" class="md-nav__link">
      OAuth Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.oauth.access_codes/" title="OAuth Access Codes" class="md-nav__link">
      OAuth Access Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.triggers/" title="Triggers" class="md-nav__link">
      Triggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.triggers.state/" title="Triggers state" class="md-nav__link">
      Triggers state
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.remote.requests/" title="Remote requests" class="md-nav__link">
      Remote requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.sessions/" title="Sessions" class="md-nav__link">
      Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.shared/" title="Shared" class="md-nav__link">
      Shared
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/io.cozy.terms/" title="Terms" class="md-nav__link">
      Terms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-doctypes/docs/com.unibet.bets/" title="Bets Unibet" class="md-nav__link">
      Bets Unibet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-ui/" title="cozy-ui" class="md-nav__link">
      cozy-ui
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-device-helper/" title="cozy-device-helper" class="md-nav__link">
      cozy-device-helper
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-10" type="checkbox" id="nav-4-10">
    
    <label class="md-nav__link" for="nav-4-10">
      cozy-client
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-10">
        cozy-client
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/relationships/" title="Using relationship" class="md-nav__link">
      Using relationship
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/metadata/" title="cozyMetadata maintenance" class="md-nav__link">
      cozyMetadata maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/react-integration/" title="React integration" class="md-nav__link">
      React integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/details/" title="Other details" class="md-nav__link">
      Other details
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-client/" title="Cozy Client API" class="md-nav__link">
      Cozy Client API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-pouch-link/" title="Cozy Pouch Link API" class="md-nav__link">
      Cozy Pouch Link API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-client/api/cozy-stack-client/" title="Cozy Stack Client API" class="md-nav__link">
      Cozy Stack Client API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-realtime/" title="cozy-realtime" class="md-nav__link">
      cozy-realtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-12" type="checkbox" id="nav-4-12">
    
    <label class="md-nav__link" for="nav-4-12">
      cozy-konnector-libs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-12">
        cozy-konnector-libs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/dev/" title="Develop" class="md-nav__link">
      Develop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/operation-linking/" title="Operation linking" class="md-nav__link">
      Operation linking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-konnector-libs/synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-apps-registry/" title="cozy-apps-registry" class="md-nav__link">
      cozy-apps-registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cozy-flags/" title="cozy-flags" class="md-nav__link">
      cozy-flags
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-15" type="checkbox" id="nav-4-15" checked>
    
    <label class="md-nav__link" for="nav-4-15">
      cozy-client-js
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-15">
        cozy-client-js
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../browser-sdk-transition/" title="Transition from cozy-browser-sdk" class="md-nav__link">
      Transition from cozy-browser-sdk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../offline/" title="How to support offline" class="md-nav__link">
      How to support offline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../oauth/" title="OAuth guide" class="md-nav__link">
      OAuth guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../auth-api/" title="Authentication API" class="md-nav__link">
      Authentication API
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Data System API
      </label>
    
    <a href="./" title="Data System API" class="md-nav__link md-nav__link--active">
      Data System API
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatacreatedoctype-attributes" title="cozy.client.data.create(doctype, attributes)" class="md-nav__link">
    cozy.client.data.create(doctype, attributes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatafinddoctype-id" title="cozy.client.data.find(doctype, id)" class="md-nav__link">
    cozy.client.data.find(doctype, id)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatafindmanydoctype-ids" title="cozy.client.data.findMany(doctype, [ids])" class="md-nav__link">
    cozy.client.data.findMany(doctype, [ids])
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatafindalldoctype" title="cozy.client.data.findAll(doctype)" class="md-nav__link">
    cozy.client.data.findAll(doctype)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatachangesfeeddoctype-options" title="cozy.client.data.changesFeed(doctype, options)" class="md-nav__link">
    cozy.client.data.changesFeed(doctype, options)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdataupdatedoctype-doc-newdoc" title="cozy.client.data.update(doctype, doc, newdoc)" class="md-nav__link">
    cozy.client.data.update(doctype, doc, newdoc)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdataupdateattributesdoctype-id-changes" title="cozy.client.data.updateAttributes(doctype, id, changes)" class="md-nav__link">
    cozy.client.data.updateAttributes(doctype, id, changes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatadeletedoctype-doc" title="cozy.client.data.delete(doctype, doc)" class="md-nav__link">
    cozy.client.data.delete(doctype, doc)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatadefineindexdoctype-fields" title="cozy.client.data.defineIndex(doctype, fields)" class="md-nav__link">
    cozy.client.data.defineIndex(doctype, fields)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdataqueryindexreference-query" title="cozy.client.data.query(indexReference, query)" class="md-nav__link">
    cozy.client.data.query(indexReference, query)
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../files-api/" title="Files API" class="md-nav__link">
      Files API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../jobs-api/" title="Jobs API" class="md-nav__link">
      Jobs API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../intents-api/" title="Intents API" class="md-nav__link">
      Intents API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../settings-api/" title="Settings API" class="md-nav__link">
      Settings API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sharing-api/" title="Sharing API" class="md-nav__link">
      Sharing API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatacreatedoctype-attributes" title="cozy.client.data.create(doctype, attributes)" class="md-nav__link">
    cozy.client.data.create(doctype, attributes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatafinddoctype-id" title="cozy.client.data.find(doctype, id)" class="md-nav__link">
    cozy.client.data.find(doctype, id)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatafindmanydoctype-ids" title="cozy.client.data.findMany(doctype, [ids])" class="md-nav__link">
    cozy.client.data.findMany(doctype, [ids])
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatafindalldoctype" title="cozy.client.data.findAll(doctype)" class="md-nav__link">
    cozy.client.data.findAll(doctype)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatachangesfeeddoctype-options" title="cozy.client.data.changesFeed(doctype, options)" class="md-nav__link">
    cozy.client.data.changesFeed(doctype, options)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdataupdatedoctype-doc-newdoc" title="cozy.client.data.update(doctype, doc, newdoc)" class="md-nav__link">
    cozy.client.data.update(doctype, doc, newdoc)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdataupdateattributesdoctype-id-changes" title="cozy.client.data.updateAttributes(doctype, id, changes)" class="md-nav__link">
    cozy.client.data.updateAttributes(doctype, id, changes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatadeletedoctype-doc" title="cozy.client.data.delete(doctype, doc)" class="md-nav__link">
    cozy.client.data.delete(doctype, doc)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdatadefineindexdoctype-fields" title="cozy.client.data.defineIndex(doctype, fields)" class="md-nav__link">
    cozy.client.data.defineIndex(doctype, fields)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cozyclientdataqueryindexreference-query" title="cozy.client.data.query(indexReference, query)" class="md-nav__link">
    cozy.client.data.query(indexReference, query)
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cozy/cozy.github.io/edit/dev/src/cozy-client-js/data-api.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="data-api">Data API<a class="headerlink" href="#data-api" title="Permanent link">&para;</a></h1>
<h3 id="cozyclientdatacreatedoctype-attributes"><code>cozy.client.data.create(doctype, attributes)</code><a class="headerlink" href="#cozyclientdatacreatedoctype-attributes" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.create(doctype, attributes)</code> adds a document to the database.</p>
<p>It returns a promise for the created object. The created object has the same attributes than thoses passed, with an added <code>_id</code>. It&rsquo;s the unique identifier for the created document.</p>
<p>If you use an existing doctype, you should follow its expected format. <strong>v2</strong> does not enforce this, but we plan to on <strong>v3</strong>. Anyway, do you want to be the app that creates empty contacts in the native app ?</p>
<ul>
<li><code>doctype</code> is a string specifying the <a href="../intro/#doctypes--permissions">doctype</a></li>
<li><code>attributes</code> is an object that can be stringified using <code>JSON.stringify</code>: if it is a complex or cyclic object, add a <code>toJSON</code> method to it (native behaviour of <code>JSON.stringify</code>).</li>
</ul>
<p><strong>Warning</strong>: on <strong>v3</strong>, an extra field <code>_rev</code> is added, it is the unique identifier for the document revision, after creation, it will be of the shape <code>1-xxxxxxxxx</code> for first revision.</p>
<div class="codehilite"><pre><span></span><span class="c1">// simple object</span>
<span class="kr">const</span> <span class="nx">book</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Moby Dick&quot;</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span><span class="s2">&quot;Herman Melville&quot;</span><span class="p">,</span> <span class="nx">isbn</span><span class="o">:</span> <span class="s2">&quot;42&quot;</span> <span class="p">}</span>
<span class="kr">const</span> <span class="nx">created</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">myBooksDoctype</span><span class="p">,</span> <span class="nx">book</span><span class="p">)</span>
<span class="c1">// same fields</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">created</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">created</span><span class="p">.</span><span class="nx">author</span><span class="p">,</span> <span class="nx">created</span><span class="p">.</span><span class="nx">isbn</span><span class="p">)</span>
<span class="c1">// _id, _rev are added</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">created</span><span class="p">.</span><span class="nx">_id</span><span class="p">,</span> <span class="nx">created</span><span class="p">.</span><span class="nx">_rev</span><span class="p">)</span>
<span class="c1">// let&#39;s keep it for later</span>
<span class="nx">createdBookId</span> <span class="o">=</span> <span class="nx">created</span><span class="p">.</span><span class="nx">_id</span>
</pre></div>


<h3 id="cozyclientdatafinddoctype-id"><code>cozy.client.data.find(doctype, id)</code><a class="headerlink" href="#cozyclientdatafinddoctype-id" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.find(doctype, id)</code> returns the document associated to the given ID.</p>
<p>It returns a promise for the document. It will have the same fields than the returned value of <code>create</code>, including <code>_id</code> and <code>_rev</code>.</p>
<p>If the document does not exist, the promise will be rejected or the callback will be passed an error.</p>
<ul>
<li><code>doctype</code> is a string specifying the <a href="../intro/#doctypes--permissions">doctype</a></li>
<li><code>id</code> is a string specifying the identifier of the document you look for</li>
</ul>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">myBooksDoctype</span><span class="p">,</span> <span class="nx">createdBookId</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">_id</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_rev</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">author</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">isbn</span><span class="p">)</span>
</pre></div>


<h3 id="cozyclientdatafindmanydoctype-ids"><code>cozy.client.data.findMany(doctype, [ids])</code><a class="headerlink" href="#cozyclientdatafindmanydoctype-ids" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.findMany(doctype, [ids])</code> returns the documents associated to the given IDs.</p>
<p>It returns a promise for a map, with the given IDs as keys.</p>
<p>When a document is found, the corresponding value will be an object with a
single <code>doc</code> key containing the document.
Documents will have the same fields than the returned values of <code>create</code>,
including <code>_id</code> and <code>_rev</code>.</p>
<p>When a document is missing, the corresponding value will be an object with a
single <code>error</code> key containing the error message.
Even when some document is missing, the promise will still be fulfilled or the
callback will be passed the resulting map, so you can still access the other
documents found and identify the missing ones.</p>
<ul>
<li><code>doctype</code> is a string specifying the
  <a href="../intro/#doctypes--permissions">doctype</a></li>
<li><code>ids</code> is an array of strings specifying the identifiers of the documents you
  look for</li>
</ul>
<p><strong>Warning</strong>: Not available on <strong>v2</strong>. A fallback implementation could be
provided at some point.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">ids</span> <span class="o">=</span> <span class="p">[</span><span class="nx">createdBookId</span><span class="p">,</span> <span class="p">...]</span>
<span class="kr">const</span> <span class="nx">resultsById</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">findMany</span><span class="p">(</span><span class="nx">myBooksDoctype</span><span class="p">,</span> <span class="nx">ids</span><span class="p">)</span>
<span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">id</span> <span class="k">of</span> <span class="nx">ids</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span><span class="nx">doc</span><span class="p">,</span> <span class="nx">error</span><span class="p">}</span> <span class="o">=</span> <span class="nx">resultsById</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Error while fetching book </span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">_id</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_rev</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">author</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">isbn</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3 id="cozyclientdatafindalldoctype"><code>cozy.client.data.findAll(doctype)</code><a class="headerlink" href="#cozyclientdatafindalldoctype" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.findAll(doctype)</code> returns the all documents associated to the given doctype.</p>
<p>It returns a promise for a map, with the given IDs as keys.</p>
<p>When a document is found, the corresponding value will be an object with a
single <code>doc</code> key containing the document.
Documents will have the same fields than the returned values of <code>create</code>,
including <code>_id</code> and <code>_rev</code>.</p>
<ul>
<li><code>doctype</code> is a string specifying the
  <a href="../intro/#doctypes--permissions">doctype</a>
  look for</li>
</ul>
<p><strong>Warning</strong>: Not available on <strong>v2</strong>. A fallback implementation could be
provided at some point.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">findAll</span><span class="p">(</span><span class="nx">myBooksDoctype</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Error while fetching books&#39;</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">id</span> <span class="k">of</span> <span class="nx">result</span><span class="p">.</span><span class="nx">keys</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">docs</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">_id</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_rev</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">author</span><span class="p">,</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">isbn</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<h3 id="cozyclientdatachangesfeeddoctype-options"><code>cozy.client.data.changesFeed(doctype, options)</code><a class="headerlink" href="#cozyclientdatachangesfeeddoctype-options" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.changesFeed(doctype, options)</code> returns the last changes from CouchDB for the given doctype</p>
<p>It returns a promise for the changes.</p>
<ul>
<li><code>doctype</code> is a string specifying the <a href="../intro/#doctypes--permissions">doctype</a></li>
<li><code>options</code> is an object, only its <code>since</code> parameter is supported currently</li>
</ul>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">changes</span> <span class="o">=</span> <span class="nx">await</span><span class="p">.</span><span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">changesFeed</span><span class="p">(</span><span class="nx">myBooksDoctype</span><span class="p">,</span> <span class="p">{</span> <span class="nx">since</span><span class="o">:</span> <span class="mi">0</span> <span class="p">})</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">changes</span><span class="p">.</span><span class="nx">last_seq</span><span class="p">,</span> <span class="nx">changes</span><span class="p">.</span><span class="nx">results</span><span class="p">)</span>
</pre></div>


<h3 id="cozyclientdataupdatedoctype-doc-newdoc"><code>cozy.client.data.update(doctype, doc, newdoc)</code><a class="headerlink" href="#cozyclientdataupdatedoctype-doc-newdoc" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.update(doctype, doc, newdoc)</code> replaces the document by a new version.</p>
<p>It returns a promise for the updated document. The updated document will have the same fields and values than provided in newdoc, the same <code>_id</code> than doc, and a <code>_rev</code> incremented from doc&rsquo;s number.</p>
<p>If the document does not exist, the promise will reject with an error.</p>
<p>If the document current <code>_rev</code> does not match the passed one, it means there is a conflict and the promise is rejected with an error.</p>
<ul>
<li><code>doctype</code> is a string specifying the <a href="../intro/#doctypes--permissions">doctype</a></li>
<li><code>doc</code> is an object with <em>at least</em> the fields <code>_id</code> and <code>_rev</code> containing the identifier and revision of the file you want to update.</li>
<li><code>newdoc</code> is an object, specifying the new content of the document</li>
</ul>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">updates</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Moby Dick !&quot;</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span><span class="s2">&quot;THE Herman Melville&quot;</span><span class="p">}</span>
<span class="kr">const</span> <span class="nx">updated</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">myBooksDoctype</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">updates</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updated</span><span class="p">.</span><span class="nx">_id</span> <span class="o">===</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span> <span class="c1">// _id does not change</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updated</span><span class="p">.</span><span class="nx">_rev</span><span class="p">)</span> <span class="c1">// 2-xxxxxx</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updated</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">updated</span><span class="p">.</span><span class="nx">year</span><span class="p">)</span> <span class="c1">// fields are changed</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updated</span><span class="p">.</span><span class="nx">isbn</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="c1">// update erase fields</span>
</pre></div>


<h3 id="cozyclientdataupdateattributesdoctype-id-changes"><code>cozy.client.data.updateAttributes(doctype, id, changes)</code><a class="headerlink" href="#cozyclientdataupdateattributesdoctype-id-changes" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.updateAttributes(doctype, id, changes)</code> applies change to the document.</p>
<p>It returns a promise for the updated document. The updated document will be the result of merging changes into the document with given <code>_id</code> and a incremented <code>_rev</code>.</p>
<p>If the document does not exist, the promise will be rejected or the callback will be passed an error.</p>
<p>This function gives 3 attempts not to conflict.</p>
<ul>
<li><code>doctype</code> is a string specifying the <a href="../intro/#doctypes--permissions">doctype</a></li>
<li><code>id</code> is a string specifying the identifier of the document to update</li>
<li><code>changes</code> is an object</li>
</ul>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">updates</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">year</span><span class="o">:</span> <span class="mi">1852</span><span class="p">}</span>
<span class="kr">const</span> <span class="nx">updated</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">updateAttributes</span><span class="p">(</span><span class="nx">myBooksDoctype</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">updates</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updated</span><span class="p">.</span><span class="nx">_id</span> <span class="o">===</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span> <span class="c1">// _id does not change</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updated</span><span class="p">.</span><span class="nx">_rev</span><span class="p">)</span> <span class="c1">// 3-xxxxxx</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updated</span><span class="p">.</span><span class="nx">year</span><span class="p">)</span> <span class="c1">// fields are changed</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updated</span><span class="p">.</span><span class="nx">isbn</span><span class="p">)</span> <span class="c1">// updateAttributes preserve other fields</span>
</pre></div>


<h3 id="cozyclientdatadeletedoctype-doc"><code>cozy.client.data.delete(doctype, doc)</code><a class="headerlink" href="#cozyclientdatadeletedoctype-doc" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.delete(doctype, doc )</code> will erase the document from the database.</p>
<p>It returns a promise which will be resolved when the document has been deleted.</p>
<p>If the document does not exist, the promise will be rejected with an error. If the document current <code>_rev</code> does not match the passed one, it means there is a conflict and the promise is rejected with an error.</p>
<ul>
<li><code>doctype</code> is a string specifying the <a href="../intro/#doctypes--permissions">doctype</a></li>
<li><code>doc</code> is an object with <em>at least</em> the fields <code>_id</code> and <code>_rev</code> containing the identifier and revision of the file you want to destroy.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">myBooksDoctype</span><span class="p">,</span> <span class="nx">updated</span><span class="p">)</span>
</pre></div>


<h3 id="cozyclientdatadefineindexdoctype-fields"><code>cozy.client.data.defineIndex(doctype, fields)</code><a class="headerlink" href="#cozyclientdatadefineindexdoctype-fields" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.defineIndex(doctype, fields)</code> creates an index for a document type. It is idempotent, it can be called several time with no bad effect.</p>
<p>It returns a promise for an <strong>indexReference</strong>, which can be passed to <code>cozy.data.query</code>.</p>
<ul>
<li><code>doctype</code> is a string specifying the <a href="../intro/#doctypes--permissions">doctype</a></li>
<li><code>fields</code> is an array of the fields name to index</li>
</ul>
<p><strong>Warning</strong>: when used on <strong>v2</strong>, a map-reduce view is created internally, when used on <strong>v3</strong>, we use couchdb built-in mango queries.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">booksByYearRef</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">defineIndex</span><span class="p">(</span><span class="nx">myType</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">])</span>
</pre></div>


<h3 id="cozyclientdataqueryindexreference-query"><code>cozy.client.data.query(indexReference, query)</code><a class="headerlink" href="#cozyclientdataqueryindexreference-query" title="Permanent link">&para;</a></h3>
<p><code>cozy.client.data.query(indexReference, query)</code> find documents using an index.</p>
<p>It returns a promise with a list of documents matching the query. Results will be returned in the order defined for the index.</p>
<ul>
<li><code>query</code> is an object with the following fields:</li>
<li><code>selector</code>: a mango selector</li>
<li><code>limit</code>: maximum number of results</li>
<li><code>skip</code>: ignore the first x results (pagination)</li>
<li><code>wholeResponse</code>: when set to true, the whole query response will be returned instead of just the docs. This is useful when paginating, because you&rsquo;ll get the <code>next</code> property in the response object.</li>
</ul>
<p><strong>Warning</strong>: complex mango queries are not compatible with <strong>v2</strong></p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">cozy</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">booksByYearRef</span><span class="p">,</span> <span class="p">{</span>
  <span class="s2">&quot;selector&quot;</span><span class="o">:</span> <span class="p">{</span><span class="nx">year</span><span class="o">:</span> <span class="mi">1851</span><span class="p">},</span>
  <span class="s2">&quot;limit&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">&quot;skip&quot;</span><span class="o">:</span> <span class="mi">1</span>
<span class="p">})</span>

<span class="nx">results</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">3</span> <span class="c1">// we limited to 3 results</span>
<span class="nx">resuts</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">_id</span> <span class="o">===</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_id</span>
<span class="nx">resuts</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">title</span> <span class="o">===</span> <span class="s2">&quot;Moby Dick&quot;</span>
<span class="nx">resuts</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">rating</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="c1">// lowest rating first</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../auth-api/" title="Authentication API" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Authentication API
              </span>
            </div>
          </a>
        
        
          <a href="../files-api/" title="Files API" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Files API
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../extra.js"></script>
      
    
  </body>
</html>